<!DOCTYPE html>
<html lang>
  <head><meta name="generator" content="Hexo 3.9.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="description" content="ZooKeeper-分布式应用的协调服务">




  <meta name="keywords" content="Zookeeper,">





  <link rel="alternate" href="/default" title="Illusory">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.1">



<link rel="canonical" href="http://yaoper.github.io/2020/03/26/ZooKeeper-分布式应用的协调服务/">


<meta name="description" content="ZooKeeper是一个分布式的开源协调服务，用于分布式应用程序。它公开了一组简单的原子操作，分布式应用程序可以构建这些原子操作，以实现更高级别的服务，以实现同步，配置维护以及组和命名。它的设计易于编程，并使用在熟悉的文件系统目录树结构之后设计的数据模型。它运行在Java中，并且对Java和C都有绑定。 周所周知，协调服务是很难做到的。它们特别容易出现诸如竞态条件和死锁等错误。ZooKeeper背">
<meta name="keywords" content="Zookeeper">
<meta property="og:type" content="article">
<meta property="og:title" content="ZooKeeper-分布式应用的协调服务">
<meta property="og:url" content="http://yaoper.github.io/2020/03/26/ZooKeeper-分布式应用的协调服务/index.html">
<meta property="og:site_name" content="Illusory">
<meta property="og:description" content="ZooKeeper是一个分布式的开源协调服务，用于分布式应用程序。它公开了一组简单的原子操作，分布式应用程序可以构建这些原子操作，以实现更高级别的服务，以实现同步，配置维护以及组和命名。它的设计易于编程，并使用在熟悉的文件系统目录树结构之后设计的数据模型。它运行在Java中，并且对Java和C都有绑定。 周所周知，协调服务是很难做到的。它们特别容易出现诸如竞态条件和死锁等错误。ZooKeeper背">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://www.imageoss.com/images/2020/03/17/12540413-62c81551958254dc.jpg">
<meta property="og:image" content="https://www.imageoss.com/images/2020/03/17/12540413-a229d45b54a02423.jpg">
<meta property="og:updated_time" content="2020-03-26T04:06:50.216Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZooKeeper-分布式应用的协调服务">
<meta name="twitter:description" content="ZooKeeper是一个分布式的开源协调服务，用于分布式应用程序。它公开了一组简单的原子操作，分布式应用程序可以构建这些原子操作，以实现更高级别的服务，以实现同步，配置维护以及组和命名。它的设计易于编程，并使用在熟悉的文件系统目录树结构之后设计的数据模型。它运行在Java中，并且对Java和C都有绑定。 周所周知，协调服务是很难做到的。它们特别容易出现诸如竞态条件和死锁等错误。ZooKeeper背">
<meta name="twitter:image" content="https://www.imageoss.com/images/2020/03/17/12540413-62c81551958254dc.jpg">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1">
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  



    <title> ZooKeeper-分布式应用的协调服务 - Illusory </title>
  </head>

  <body>
    <div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">Illusory</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/archives">
                            
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/about">
                            
                            
                                About
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>

      </header>
      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          ZooKeeper-分布式应用的协调服务
        
      </h1>

      <time class="post-time">
          Mar 26 2020
      </time>
    </header>



    
            <div class="post-content">
            <p>ZooKeeper是一个分布式的开源协调服务，用于分布式应用程序。它公开了一组简单的原子操作，分布式应用程序可以构建这些原子操作，以实现更高级别的服务，以实现同步，配置维护以及组和命名。<br>它的设计易于编程，并使用在熟悉的文件系统目录树结构之后设计的数据模型。它运行在Java中，并且对Java和C都有绑定。</p>
<p>周所周知，协调服务是很难做到的。它们特别容易出现诸如竞态条件和死锁等错误。ZooKeeper背后的动机是减轻分布式应用程序从头开始实施协调服务的责任。</p>
<h2 id="设计目标"><a href="#设计目标" class="headerlink" title="设计目标"></a>设计目标</h2><p><strong>Zookeeper</strong>是简单的。Zookeeper允许分布式进程之间彼此协调，通过一个共享的分级命名空间，它非常像标准的文件系统。</p>
<p>ZooKeeper实现非常重视高性能，高可用性，严格有序的访问。ZooKeeper的性能方面意味着它可以在大型分布式系统中使用。<br>可靠性方面使其不会成为单点故障。严格的排序意味着可以在客户端实现复杂的同步原子操作。</p>
<p><strong>Zookeeper是可复制的。</strong> 与它协调的分布式进程一样，ZooKeeper本身也可以在称为集合的一组主机上进行复制。</p>
<p><img src="https://www.imageoss.com/images/2020/03/17/12540413-62c81551958254dc.jpg" alt="12540413-62c81551958254dc.jpg"></p>
<p>组成ZooKeeper服务的服务器必须彼此了解。它们保持状态的内存映像，以及持久存储中的事务日志和快照。只要大多数服务器可用，ZooKeeper服务就可用。<br>客户端连接到单个ZooKeeper服务器。客户端维护一个TCP连接，通过它发送请求，获取响应，获取观看事件并发送心跳。如果与服务器的TCP连接中断，则客户端将连接到其他服务器。</p>
<p><strong>Zookeeper是有序的。</strong> ZooKeeper使用反映所有ZooKeeper事务顺序的数字标记每个更新。后续操作可以使用该顺序来实现更高级别的抽象，例如同步原子操作。</p>
<p><strong>Zookeeper是非常快的。</strong> 它在“读取主导”工作负载中速度特别快。ZooKeeper应用程序在数千台计算机上运行，​​并且在读取比写入更常见的情况下表现最佳，比率大约为10：1。</p>
<h2 id="数据模型和分层名称空间"><a href="#数据模型和分层名称空间" class="headerlink" title="数据模型和分层名称空间"></a>数据模型和分层名称空间</h2><p>ZooKeeper提供的名称空间非常类似于标准文件系统。名称是由斜线（/）分隔的一系列路径元素。ZooKeeper名称空间中的每个节点都由一个路径标识。</p>
<p><img src="https://www.imageoss.com/images/2020/03/17/12540413-a229d45b54a02423.jpg" alt="12540413-a229d45b54a02423.jpg"></p>
<h2 id="节点和临时节点"><a href="#节点和临时节点" class="headerlink" title="节点和临时节点"></a>节点和临时节点</h2><p>与标准文件系统不同的是，ZooKeeper命名空间中的每个节点都可以拥有与其相关的数据以及子级。这就像拥有一个允许文件也是目录的文件系统。（ZooKeeper旨在存储协调数据：状态信息，配置，位置信息等，因此存储在每个节点的数据通常很小，在字节到千字节范围内。）我们使用术语 znode来表明我们正在谈论ZooKeeper数据节点。</p>
<p>Znodes维护一个stat结构，包括数据更改，ACL更改和时间戳的版本号，以允许缓存验证和协调更新。每次znode的数据更改时，版本号都会增加。例如，每当客户端检索数据时，它也会收到数据的版本。</p>
<p>存储在名称空间中每个节点上的数据是以原子方式读取和写入的。读取获取与znode关联的所有数据字节，写入将替换所有数据。每个节点都有一个访问控制列表（ACL），限制谁可以做什么。</p>
<p>ZooKeeper也有临时节点的概念。只要创建znode的会话处于活动状态，就会存在这些znode。当会话结束时，znode被删除。</p>
<h2 id="有条件的更新和监视"><a href="#有条件的更新和监视" class="headerlink" title="有条件的更新和监视"></a>有条件的更新和监视</h2><p>ZooKeeper支持观察的概念。客户可以在znode上设置观察器。当znode更改时，将触发并删除观察器。<br>当观察被触发时，客户端收到一个数据包，说明znode已经改变。如果客户端和其中一个Zoo Keeper服务器之间的连接断开，客户端将收到本地通知。</p>
<h2 id="担保"><a href="#担保" class="headerlink" title="担保"></a>担保</h2><p>ZooKeeper非常快速且非常简单。但是，由于其目标是构建更复杂的服务（如同步）的基础，因此它提供了一系列保证。这些是：</p>
<ul>
<li><p>顺序一致性 - 客户端的更新将按照它们发送的顺序进行应用。</p>
</li>
<li><p>原子性 - 更新成功或失败。没有部分结果。</p>
</li>
<li><p>单系统映像 - 无论服务器连接到哪个服务器，客户端都会看到相同的服务视图。</p>
</li>
<li><p>可靠性 - 一旦应用更新，它将一直持续到客户覆盖更新为止。</p>
</li>
<li><p>及时性 - 系统的客户视图保证在特定时间范围内是最新的。</p>
</li>
</ul>
<h2 id="简单的API"><a href="#简单的API" class="headerlink" title="简单的API"></a>简单的API</h2><p>ZooKeeper的设计目标之一是提供一个非常简单的编程接口。因此，它仅支持以下操作：</p>
<ul>
<li>创建——在树中的某个位置创建一个节点</li>
<li>删除——删除节点</li>
<li>存在——测试某个位置是否存在节点</li>
<li>获取数据——从节点读取数据</li>
<li>设定数据——将数据写入节点</li>
<li>得到子节点——检索节点的子节点列表</li>
<li>同步——等待数据传播</li>
</ul>

            </div>
          

    
      <footer class="post-footer">
		
		<div class="post-tags">
		  
			<a href="/tags/Zookeeper/">Zookeeper</a>
		  
		</div>
		

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2020/03/26/高性能MySQL读书笔记（第四章）/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">高性能MySQL读书笔记第四章</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2020/03/26/高性能MySQL读书笔记（第三章）/">
        <span class="next-text nav-default">高性能MySQL读书笔记第三章</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

        
  <div class="comments" id="comments">
    
  </div>


      </footer>
    
  </article>

    </div>

      </div>

      <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
        2014 -
    
    2020
    <span class="footer-author">yaoper.</span>
    <span class="power-by">
        Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a> and <a class="theme-link" href="https://github.com/frostfan/hexo-theme-polarbear">Polar Bear</a>
    </span>
</span>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script type="text/javascript" src="/js/src/theme.js?v=1.1"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1"></script>

  </body>
</html>
