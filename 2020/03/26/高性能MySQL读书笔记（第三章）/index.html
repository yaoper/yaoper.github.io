<!DOCTYPE html>
<html lang>
  <head><meta name="generator" content="Hexo 3.9.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="description" content="高性能MySQL读书笔记第三章">




  <meta name="keywords" content="MySQL,">





  <link rel="alternate" href="/default" title="Illusory">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.1">



<link rel="canonical" href="http://yaoper.github.io/2020/03/26/高性能MySQL读书笔记（第三章）/">


<meta name="description" content="3. 服务器性能剖析3.1 性能优化简介我们将性能定义为完成某个任务所需要的时间度量，换句话说，性能即响应时间，这是一个非常重要的原则。无法度量就没有有效地优化，所以第一步应该测量时间花在什么地方。 3.1.1 通过性能剖析进行优化掌握并实践面向响应时间的优化方法，就需要不断地对系统进行性能剖析。性能剖析是测量和分析时间花在那里的主要方法。 3.1.2 理解性能剖析值得优化的查询、异常情况、未知的">
<meta name="keywords" content="MySQL">
<meta property="og:type" content="article">
<meta property="og:title" content="高性能MySQL读书笔记第三章">
<meta property="og:url" content="http://yaoper.github.io/2020/03/26/高性能MySQL读书笔记（第三章）/index.html">
<meta property="og:site_name" content="Illusory">
<meta property="og:description" content="3. 服务器性能剖析3.1 性能优化简介我们将性能定义为完成某个任务所需要的时间度量，换句话说，性能即响应时间，这是一个非常重要的原则。无法度量就没有有效地优化，所以第一步应该测量时间花在什么地方。 3.1.1 通过性能剖析进行优化掌握并实践面向响应时间的优化方法，就需要不断地对系统进行性能剖析。性能剖析是测量和分析时间花在那里的主要方法。 3.1.2 理解性能剖析值得优化的查询、异常情况、未知的">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2020-03-26T04:05:34.728Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="高性能MySQL读书笔记第三章">
<meta name="twitter:description" content="3. 服务器性能剖析3.1 性能优化简介我们将性能定义为完成某个任务所需要的时间度量，换句话说，性能即响应时间，这是一个非常重要的原则。无法度量就没有有效地优化，所以第一步应该测量时间花在什么地方。 3.1.1 通过性能剖析进行优化掌握并实践面向响应时间的优化方法，就需要不断地对系统进行性能剖析。性能剖析是测量和分析时间花在那里的主要方法。 3.1.2 理解性能剖析值得优化的查询、异常情况、未知的">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1">
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  



    <title> 高性能MySQL读书笔记第三章 - Illusory </title>
  </head>

  <body>
    <div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">Illusory</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/archives">
                            
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/about">
                            
                            
                                About
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>

      </header>
      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          高性能MySQL读书笔记第三章
        
      </h1>

      <time class="post-time">
          Mar 26 2020
      </time>
    </header>



    
            <div class="post-content">
            <h3 id="3-服务器性能剖析"><a href="#3-服务器性能剖析" class="headerlink" title="3. 服务器性能剖析"></a>3. 服务器性能剖析</h3><h4 id="3-1-性能优化简介"><a href="#3-1-性能优化简介" class="headerlink" title="3.1 性能优化简介"></a>3.1 性能优化简介</h4><p>我们将性能定义为完成某个任务所需要的时间度量，换句话说，性能即响应时间，这是一个非常重要的原则。无法度量就没有有效地优化，所以第一步应该测量时间花在什么地方。</p>
<h5 id="3-1-1-通过性能剖析进行优化"><a href="#3-1-1-通过性能剖析进行优化" class="headerlink" title="3.1.1 通过性能剖析进行优化"></a>3.1.1 通过性能剖析进行优化</h5><p>掌握并实践面向响应时间的优化方法，就需要不断地对系统进行性能剖析。性能剖析是测量和分析时间花在那里的主要方法。</p>
<h5 id="3-1-2-理解性能剖析"><a href="#3-1-2-理解性能剖析" class="headerlink" title="3.1.2 理解性能剖析"></a>3.1.2 理解性能剖析</h5><p>值得优化的查询、异常情况、未知的未知，被掩藏的细节</p>
<h4 id="3-2-对应用程序进行性能剖析"><a href="#3-2-对应用程序进行性能剖析" class="headerlink" title="3.2 对应用程序进行性能剖析"></a>3.2 对应用程序进行性能剖析</h4><p>对任何需要消耗时间的任务都可以进行新能剖析，性能瓶颈可能有很多的影响因素：</p>
<ul>
<li>外部资源</li>
<li>应用需要处理大量的数据</li>
<li>在循环中执行了昂贵的操作</li>
<li>使用了低效率的算法</li>
</ul>
<h4 id="3-3-剖析MySQL查询"><a href="#3-3-剖析MySQL查询" class="headerlink" title="3.3 剖析MySQL查询"></a>3.3 剖析MySQL查询</h4><h5 id="3-3-1-剖析服务器负载"><a href="#3-3-1-剖析服务器负载" class="headerlink" title="3.3.1 剖析服务器负载"></a>3.3.1 剖析服务器负载</h5><p>服务器端的剖析能有效地审计效率低下的查询，定位和优化慢查询能够显著提升应用的性能，也能解决某些特定的难题。</p>
<p><strong>捕获MySQL的查询到日志中</strong></p>
<p>可以通过long_query_time=0来捕获所有的查询日志。</p>
<p><strong>分析查询日志</strong></p>
<p>强烈建议对捕获的查询日志记性分析，可以借助工具pt-query-digets这个强大的日志分析工具。</p>
<h5 id="3-3-2-剖析单条查询"><a href="#3-3-2-剖析单条查询" class="headerlink" title="3.3.2 剖析单条查询"></a>3.3.2 剖析单条查询</h5><p><strong>使用SHOW PROFILE</strong></p>
<p><strong>使用SHOW STATUS</strong></p>
<p><strong>使用慢查询日志</strong></p>
<p><strong>使用Performance Schema</strong></p>
<h5 id="3-3-3-使用性能剖析"><a href="#3-3-3-使用性能剖析" class="headerlink" title="3.3.3 使用性能剖析"></a>3.3.3 使用性能剖析</h5><p>﻿#### 3.4 诊断间歇性问题</p>
<h5 id="3-4-1-单条查询问题还是服务器问题"><a href="#3-4-1-单条查询问题还是服务器问题" class="headerlink" title="3.4.1 单条查询问题还是服务器问题"></a>3.4.1 单条查询问题还是服务器问题</h5><p>判断是单条查询的问题还是服务器的问题可以使用以下三种办法：</p>
<p>使用show global status</p>
<p>使用show processlist</p>
<p>使用查询日志</p>
<h5 id="3-4-2-捕获诊断数据"><a href="#3-4-2-捕获诊断数据" class="headerlink" title="3.4.2 捕获诊断数据"></a>3.4.2 捕获诊断数据</h5><p>诊断触发器、解释结果数据、</p>
<h4 id="3-5-其他剖析工具"><a href="#3-5-其他剖析工具" class="headerlink" title="3.5 其他剖析工具"></a>3.5 其他剖析工具</h4><h5 id="3-5-1-使用USER-STATISTICS表"><a href="#3-5-1-使用USER-STATISTICS表" class="headerlink" title="3.5.1 使用USER_STATISTICS表"></a>3.5.1 使用USER_STATISTICS表</h5><h5 id="3-5-2-使用strace"><a href="#3-5-2-使用strace" class="headerlink" title="3.5.2 使用strace"></a>3.5.2 使用strace</h5><h4 id="3-6-总结"><a href="#3-6-总结" class="headerlink" title="3.6 总结"></a>3.6 总结</h4><p>总的来说，解决性能问题的方法是首先澄清问题，然后选择合适的技术来解决这些问题。</p>
<blockquote>
<p>我们认为定义性能最有效的方法是响应时间。</p>
<p>如果无法测量就无法有效的优化，所以性能优化工作需要基于高质量，全方位及完成的响应时间测量。</p>
<p>测量的最佳开始点是应用程序，而不是数据库。即便是问题出在底层的数据库，借助良好的测量也可以很容易的发现问题。</p>
<p>大多数系统无法完整的测量，测量有时候也会有错误的结果。但可以想办法绕过一些限制，并得到好的结果。</p>
<p>完整的测量会产生大量需要分析的数据，所以需要用到剖析器。</p>
<p>剖析报告是一种汇总信息，掩盖和丢弃了很多细节，所以需要去注意异常情况，未知的未知</p>
<p>有两种消耗时间的操作：工作后者等待。大多数剖析器只能测量因为工作而消耗的时间，所以等待分析有时候是很有用的补充。</p>
<p>优化和提升是两回事。当继续提升的成本超过收益的时候，应当停止优化。</p>
<p>注意你的直觉，应该只根据直觉来知道觉得问题的思路，而不是用于确定系统的额问题。</p>
</blockquote>

            </div>
          

    
      <footer class="post-footer">
		
		<div class="post-tags">
		  
			<a href="/tags/MySQL/">MySQL</a>
		  
		</div>
		

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2020/03/26/高性能MySQL读书笔记（第五章）/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">高性能MySQL读书笔记第五章</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2020/03/25/优秀的个人博客汇总/">
        <span class="next-text nav-default">优秀的个人博客汇总</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

        
  <div class="comments" id="comments">
    
  </div>


      </footer>
    
  </article>

    </div>

      </div>

      <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
        2014 -
    
    2020
    <span class="footer-author">yaoper.</span>
    <span class="power-by">
        Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a> and <a class="theme-link" href="https://github.com/frostfan/hexo-theme-polarbear">Polar Bear</a>
    </span>
</span>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script type="text/javascript" src="/js/src/theme.js?v=1.1"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1"></script>

  </body>
</html>
